<html><head><title>Lets talk about ... API (of shyftplan)</title><meta charset="utf-8"><link href="/styles.aa6946cf.css" rel="stylesheet" type="text/css"></head><body><section class="slides layout-regular template-default"><article class="build"><h2>Lets Talk about...</h2><h1>API</h1><h2>(of shyftplan)</h2></article><article><h2>Roadmap</h2><ul class="build"><li>What</li><li>Why</li><li>How</li><li>At shyftplan</li></ul></article><article class="section"><h1>What</h1></article><article><h2>API stands for ...</h2><ul class="build"><li><b>A</b>pplication</li><li><b>P</b>rogramming</li><li><b>I</b>nterface</li></ul></article><article><h2>What can i do with an API?</h2></article><article><h2>Import Data</h2><ul class="build horizontal"><li><img src="/logo-excel.bc88e0cf.svg" style="width:30vw;"></li><li><h1>▶</h1></li><li><img src="/logo-shyftplan.a4460871.svg" style="width:30vw;"></li></ul></article><article><h2>Export Data</h2><ul class="horizontal"><li><img src="/logo-excel.bc88e0cf.svg" style="width:30vw;"></li><li><h1>◀</h1></li><li><img src="/logo-shyftplan.a4460871.svg" style="width:30vw;"></li></ul></article><article><h2>Write Commands</h2><ul class="horizontal"><li><img src="/logo-slack.0fc35acc.svg" style="width:30vw;"></li><li><h1>▶</h1></li><li><img src="/logo-shyftplan.a4460871.svg" style="width:30vw;"></li></ul></article><article><h2>Add notifications</h2><ul class="horizontal"><li><img src="/logo-slack.0fc35acc.svg" style="width:30vw;"></li><li><h1>◀</h1></li><li><img src="/logo-shyftplan.a4460871.svg" style="width:30vw;"></li></ul></article><article class="section"><h1>Why</h1></article><article><h2>Why do i need an API for that?</h2></article><article class="build"><h2>UI</h2><h2>(User Interface)</h2></article><article><img class="bg" src="/ui-shift.84cd4a9a.png"></article><article><ul class="horizontal"><li><img src="/ui-shift-info.49cfed31.jpg" style="width:50vw;"></li><li>&nbsp;</li></ul></article><article><ul class="horizontal"><li><img src="/ui-shift-info-2.7019b6b9.jpg" style="width:50vw;"></li><li>&nbsp;</li></ul></article><article><ul class="horizontal"><li><img src="/ui-shift-info-2.7019b6b9.jpg" style="width:50vw;"></li><li><pre style="font-size:2vw">// ISO 8601
"2018-02-28T07:00:00.000+01:00"</pre></li></ul></article><article><ul class="horizontal"><li><img src="/ui-shift-info-1.9ef662b6.jpg" style="width:50vw;"></li><li>&nbsp;</li></ul></article><article><ul class="horizontal"><li><img src="/ui-shift-info-1.9ef662b6.jpg" style="width:50vw;"></li><li><pre>33291</pre></li></ul></article><article class="section"><h1>How</h1></article><article><h2>How does the data from</h2><h2>the API look like?</h2></article><article><ul class="horizontal"><li style="width:40vw;"><img src="/ui-shift-info.49cfed31.jpg" style="width:40vw;"></li><li style="width:55vw;">&nbsp;</li></ul></article><article><ul class="horizontal"><li style="width:40vw;"><img src="/ui-shift-info.49cfed31.jpg" style="width:40vw;"></li><li style="width:55vw;"><pre style="font-size:1.7vw">{
  "id": 6359714
}</pre></li></ul></article><article><ul class="horizontal"><li style="width:40vw;"><img src="/ui-shift-info-1.9ef662b6.jpg" style="width:40vw;"></li><li style="width:55vw;"><pre style="font-size:1.7vw">{
  "id": 6359714
}</pre></li></ul></article><article><ul class="horizontal"><li style="width:40vw;"><img src="/ui-shift-info-1.9ef662b6.jpg" style="width:40vw;"></li><li style="width:55vw;"><pre style="font-size:1.7vw">{
  "id": 6359714,
  "locations_position_id": 33291
}</pre></li></ul></article><article><ul class="horizontal"><li style="width:40vw;"><img src="/ui-shift-info-2.7019b6b9.jpg" style="width:40vw;"></li><li style="width:55vw;"><pre style="font-size:1.7vw">{
  "id": 6359714,
  "locations_position_id": 33291
}</pre></li></ul></article><article><ul class="horizontal"><li style="width:40vw;"><img src="/ui-shift-info-2.7019b6b9.jpg" style="width:40vw;"></li><li style="width:55vw;"><pre style="font-size:1.7vw">{
  "id": 6359714,
  "locations_position_id": 33291,
  "starts_at": "2018-02-28T07:00:00.000+01:00"
}</pre></li></ul></article><article><ul class="horizontal"><li style="width:40vw;"><img src="/ui-shift-info-3.7fae3ff3.jpg" style="width:40vw;"></li><li style="width:55vw;"><pre style="font-size:1.7vw">{
  "id": 6359714,
  "locations_position_id": 33291,
  "starts_at": "2018-02-28T07:00:00.000+01:00"
}</pre></li></ul></article><article><ul class="horizontal"><li style="width:40vw;"><img src="/ui-shift-info-3.7fae3ff3.jpg" style="width:40vw;"></li><li style="width:55vw;"><pre style="font-size:1.7vw">{
  "id": 6359714,
  "locations_position_id": 33291,
  "starts_at": "2018-02-28T07:00:00.000+01:00",
  "ends_at": "2018-02-28T15:30:00.000+01:00"
}</pre></li></ul></article><article><ul class="horizontal"><li style="width:40vw;"><img src="/ui-shift-info-4.f42422d4.jpg" style="width:40vw;"></li><li style="width:55vw;"><pre style="font-size:1.7vw">{
  "id": 6359714,
  "locations_position_id": 33291,
  "starts_at": "2018-02-28T07:00:00.000+01:00",
  "ends_at": "2018-02-28T15:30:00.000+01:00"
}</pre></li></ul></article><article><ul class="horizontal"><li style="width:40vw;"><img src="/ui-shift-info-4.f42422d4.jpg" style="width:40vw;"></li><li style="width:55vw;"><pre style="font-size:1.7vw">{
  "id": 6359714,
  "locations_position_id": 33291,
  "starts_at": "2018-02-28T07:00:00.000+01:00",
  "ends_at": "2018-02-28T15:30:00.000+01:00",
  "workers": 4
}</pre></li></ul></article><article><ul class="horizontal"><li style="width:40vw;"><img src="/ui-shift-settings.ffc50599.jpg" style="width:40vw;"></li><li style="width:55vw;"><pre style="font-size:1.7vw">{
  "id": 6359714,
  "locations_position_id": 33291,
  "starts_at": "2018-02-28T07:00:00.000+01:00",
  "ends_at": "2018-02-28T15:30:00.000+01:00",
  "workers": 4
}</pre></li></ul></article><article><ul class="horizontal"><li style="width:40vw;"><img src="/ui-shift-settings-1.77008df8.jpg" style="width:40vw;"></li><li style="width:55vw;"><pre style="font-size:1.7vw">{
  "id": 6359714,
  "locations_position_id": 33291,
  "starts_at": "2018-02-28T07:00:00.000+01:00",
  "ends_at": "2018-02-28T15:30:00.000+01:00",
  "workers": 4
}</pre></li></ul></article><article><ul class="horizontal"><li style="width:40vw;"><img src="/ui-shift-settings-1.77008df8.jpg" style="width:40vw;"></li><li style="width:55vw;"><pre style="font-size:1.7vw">{
  "id": 6359714,
  "locations_position_id": 33291,
  "starts_at": "2018-02-28T07:00:00.000+01:00",
  "ends_at": "2018-02-28T15:30:00.000+01:00",
  "workers": 4,
  "can_evaluate": true
}</pre></li></ul></article><article><ul class="horizontal"><li style="width:40vw;"><img src="/ui-shift-note.12e4e595.jpg" style="width:40vw;"></li><li style="width:55vw;"><pre style="font-size:1.7vw">{
  "id": 6359714,
  "locations_position_id": 33291,
  "starts_at": "2018-02-28T07:00:00.000+01:00",
  "ends_at": "2018-02-28T15:30:00.000+01:00",
  "workers": 4,
  "can_evaluate": true
}</pre></li></ul></article><article><ul class="horizontal"><li style="width:40vw;"><img src="/ui-shift-note-1.271f95a7.jpg" style="width:40vw;"></li><li style="width:55vw;"><pre style="font-size:1.7vw">{
  "id": 6359714,
  "locations_position_id": 33291,
  "starts_at": "2018-02-28T07:00:00.000+01:00",
  "ends_at": "2018-02-28T15:30:00.000+01:00",
  "workers": 4,
  "can_evaluate": true
}</pre></li></ul></article><article><ul class="horizontal"><li style="width:40vw;"><img src="/ui-shift-note-1.271f95a7.jpg" style="width:40vw;"></li><li style="width:55vw;"><pre style="font-size:1.7vw">{
  "id": 6359714,
  "locations_position_id": 33291,
  "starts_at": "2018-02-28T07:00:00.000+01:00",
  "ends_at": "2018-02-28T15:30:00.000+01:00",
  "workers": 4,
  "can_evaluate": true,
  "note": "We need to do a release today"
}</pre></li></ul></article><article><pre>{
  "id": 6359714,
  "locations_position_id": 33291,
  "starts_at": "2018-02-28T07:00:00.000+01:00",
  "ends_at": "2018-02-28T15:30:00.000+01:00",
  "workers": 4,
  "can_evaluate": true,
  "note": "We need to do a release today"
}</pre></article><article><pre class="linenums h1">{
  "id": 6359714,
  "locations_position_id": 33291,
  "starts_at": "2018-02-28T07:00:00.000+01:00",
  "ends_at": "2018-02-28T15:30:00.000+01:00",
  "workers": 4,
  "can_evaluate": true,
  "note": "We need to do a release today"
}</pre></article><article><pre class="linenums h5">{
  "id": 6359714,
  "locations_position_id": 33291,
  "starts_at": "2018-02-28T07:00:00.000+01:00",
  "ends_at": "2018-02-28T15:30:00.000+01:00",
  "workers": 4,
  "can_evaluate": true,
  "note": "We need to do a release today"
}</pre></article><article><pre class="linenums h3">{
  "id": 6359714,
  "locations_position_id": 33291,
  "starts_at": "2018-02-28T07:00:00.000+01:00",
  "ends_at": "2018-02-28T15:30:00.000+01:00",
  "workers": 4,
  "can_evaluate": true,
  "note": "We need to do a release today"
}</pre></article><article><pre class="linenums h7">{
  "id": 6359714,
  "locations_position_id": 33291,
  "starts_at": "2018-02-28T07:00:00.000+01:00",
  "ends_at": "2018-02-28T15:30:00.000+01:00",
  "workers": 4,
  "can_evaluate": true,
  "note": "We need to do a release today"
}</pre></article><article><pre class="linenums h6">{
  "id": 6359714,
  "locations_position_id": 33291,
  "starts_at": "2018-02-28T07:00:00.000+01:00",
  "ends_at": "2018-02-28T15:30:00.000+01:00",
  "workers": 4,
  "can_evaluate": true,
  "note": "We need to do a release today"
}</pre></article><article><pre>{
  "id": 6359714,
  "locations_position_id": 33291,
  "starts_at": "2018-02-28T07:00:00.000+01:00",
  "ends_at": "2018-02-28T15:30:00.000+01:00",
  "workers": 4,
  "can_evaluate": true,
  "note": "We need to do a release today"
}</pre></article><article><h2>How to get the data?</h2></article><article><h2><a href="https://shyftplan.com/swagger">API Playground</a></h2></article><article><h2>API Action</h2><ul class="build"><li>HTTP Method</li><li>URL</li><li>Parameters</li></ul></article><article><h2>HTTP Method</h2><ul class="build"><li><pre>POST        // create</pre></li><li><pre>GET         // read</pre></li><li><pre>PUT / PATCH // update</pre></li><li><pre>DELETE      // delete</pre></li></ul></article><article><h2>URL</h2><ul class="build"><li><pre>POST   /api/v1/shifts</pre></li><li><pre>GET    /api/v1/shifts</pre></li><li><pre>GET    /api/v1/shifts/{id}</pre></li><li><pre>PUT    /api/v1/shifts/{id}</pre></li><li><pre>DELETE /api/v1/shifts/{id}</pre></li></ul></article><article><h2>Parameters</h2><ul class="build"><li><pre style="font-size:2.5vw">?key1={value1}&key2={value2}&key3={value3}</pre></li><li><pre style="font-size:2.5vw">?user_email={email}&authentication_token={token}</pre></li><li><pre style="font-size:2.5vw">?ids[]={id1}&ids[]={id2}</pre></li></ul></article><article><h2><a href="https://shyftplan.com/swagger">API Playground</a></h2></article><article><h2>Authentication</h2><ul class="build"><li>Needed for every call</li><li>With Email</li></ul></article><article><h2>Authentication</h2><ul><li>Needed for every call</li><li>With Email & Authentication Token</li></ul></article><article><h2>Authentication Token</h2><ul class="build"><li>Can be generated on Employment Profile</li><li>Or can be fetched with Email and Password</li></ul></article><article><h2><a href="https://shyftplan.com/swagger">API Playground</a></h2></article><article class="section"><h1>At shyftplan</h1></article><article><h2>Models</h2></article><article><h2>User</h2><ul class="build"><li>Stores the login data</li></ul></article><article><h2>User</h2><pre style="font-size:2.5vw;line-height:3vw;">{
  "id": 1337,             // Id of User
  "email": "tamino@...",  // Login mail address
  "created_at": ...,
  "updated_at": ...,      // Timestamps
  "deleted_at": ...
}</pre></article><article><h2>Employment</h2><ul class="build"><li>Connects <em>Company</em>s with <em>User</em>s</li></ul></article><article><h2>Employment</h2><pre style="font-size:2.5vw;line-height:3vw;">"id": 1337,             // Id of Employment
"user_id": 4711,        // Id of User
"company_id": 54,       // Id of Company
"is_employee": true,    // Is the user an employee?
"is_stakeholder": true, // Is the user an stakeholder?
"first_name": "Foo",    // First Name
"last_name": "Bar",     // Last Name</pre></article><article><h2>Position</h2><ul class="build"><li>Every <em>Company</em> can have multiple <em>Position</em>s.</li></ul></article><article><h2>Position</h2><pre style="font-size:2.5vw;line-height:3vw;">"id": 1337,             // Id of Position
"company_id": 54,       // Id of Company
"name": "Foo",          // Position Name
"description": "",      // Descripton
"color": "#aaeee1",     // Background color
"sort": 13,             // Used to order them
"text_color": "#000",   // Foreground color (black / white)
"note": ""              // Position Note</pre></article><article><h2>Location</h2><ul class="build"><li>Every <em>Company</em> can have multiple <em>Location</em>s.</li></ul></article><article><h2>Location</h2><pre style="font-size:2.5vw;line-height:3vw;">"id": 1337,             // Id of Location
"company_id": 54,       // Id of Company
"name": "Foo",          // Position Name
"sort": 13,             // Used to order them</pre></article><article><h2>LocationsPosition</h2><ul class="build"><li>Connects <em>Location</em>s with <em>Positions</em>s.</li></ul></article><article><h2>LocationsPosition</h2><pre style="font-size:2.5vw;line-height:3vw;">"id": 1337,             // Id of LocationsPosition
"location_id": 4711,    // Id of Location
"position_id": 815,     // Id of Position
"sort": 13,             // Used to order them</pre></article><article><h2>EmploymentsPosition</h2><ul class="build"><li>Connects <em>Employment</em>s with <em>LoctionsPosition</em>s.</li></ul></article><article><h2>EmploymentsPosition</h2><pre style="font-size:2.5vw;line-height:3vw;">"id": 1337,             // Id of EmploymentsPosition
"employment_id": 4711,  // Id of Location
"locations_position_id": 815, // Id of LoctionsPosition</pre></article><article><h2>Shiftplan</h2><ul class="build"><li>Collection of <em>Shift</em>s and related to an <em>Location</em>.</li></ul></article><article><h2>Shiftplan</h2><pre style="font-size:2.5vw;line-height:3vw;">"id": 1337,             // Id of Shiftplan
"location_id": 58,      // Id of Location
"starts_at": "yyyy-mm-dd", // Shiftplan goes from this date
"ends_at": "yyyy-mm-dd",   // to this date (both included)
"state": "published",   // State (published/unpublished)
"name": "Foo",          // Shiftplan name</pre></article><article><h2>Shift</h2><ul class="build"><li>Defines an working slot for an defined amount of <em>Employment</em>s.</li><li>A shift is connected to an <em>Position</em> on the <em>Shiftplan</em>s <em>Location</em>.</li></ul></article><article><h2>Shift</h2><pre style="font-size:2.5vw;line-height:3vw;">"id": 1337,             // Id of Shift
"shiftplan_id": 4711,   // Id of Shiftplan
"locations_position_id": 815, // Id of LocationsPosition
"starts_at": "...",     // Shift goes from this time
"ends_at": "...",       // to this time (ISO 8601 format)
"workers": 1,           // Maximum amount of workers
"break_time": 0,        // Duration of breaks (in minutes)
"can_evaluate": true,   // Can be evaluated by employees
"note": null,           // Shift Note
"untimed": false,       // If shifts time counted?
"manager_note": null    // Manager Note</pre></article><article><h2>StaffShift</h2><ul class="build"><li>Connects <em>Employment</em>s with <em>Shift</em>s.</li></ul></article><article><h2>StaffShift</h2><pre style="font-size:2.5vw;line-height:3vw;">"id": 1337,             // Id of StaffShift
"shift_id": 4711,       // Id of Shift
"employment_id": 815,   // Id of Employment
"state": "no_evaluation", // Current Evaluation state
                          // - no_evaluation
                          // - done_evaluation
                          // - needs_evaluation
                          // - punchtimed
                          // - no_show
"total_minutes": 241,   // Working time (without break)
"total_payment": 50.21  // Sum of all payments</pre></article><article><h2>Request</h2><ul class="build"><li>Connects <em>Employment</em>s with <em>Shift</em>s.</li></ul></article><article><h2>Request</h2><pre style="font-size:2.5vw;line-height:3vw;">"id": 1337,             // Id of Request
"shift_id": 4711,       // Id of Shift
"employment_id": 815,   // Id of Employment
"type": "StaffRequest"  // Type of Request
                        // - StaffRequest
                        // - ChangeRequest</pre></article><article><h2>Evaluation</h2><pre style="font-size:2.5vw;line-height:3vw;">"id": 1337,             // Id of StaffShift
"shift_id": 4711,       // Id of Shift
"employment_id": 815,   // Id of Employment
"locations_position_id": 54, // Id of LocationsPosition
"shiftplan_id": 136,    // Id of Shiftplan
"location_id": 58,      // Id of Location
"position_id": 96,      // Id of Position
"user_id": 405,         // Id of User
"first_name": "Foo",    // First Name of Employment
"last_name": "Bar",     // Last Name of Employment</pre></article><article><pre style="font-size:2.5vw;line-height:3vw;">"evaluation_starts_at": ..., // Evaluated Start of Shift
"evaluation_ends_at": ...,   // Evaluated End of Shift
"evaluation_break": 0,       // Break time in minutes
"evaluation_duration": 330,  // Working time in minutes
"state": "no_evaluation",    // State of Evaluation
"shift_note": null,               // Shift note
"admin_evaluation_note": null,    // Stakeholder Note
"employee_evaluation_note": null, // Employee Note</pre></article><article><pre style="font-size:2.5vw;line-height:3vw;">"position": {
  "name": "Foo"        // Position Name
},
"location": {
  "name": "Bar"        // Location Name
},
"shift": {
  "starts_at": ...,    // Planned Shift Start
  "ends_at": ...,      // Planned Shift End
  "break_time": 0      // Planned Shift Break Time
}</pre></article><article class="section"><h1>Bonus Track</h1></article><article><h2><a href="https://shyftplan.com/swagger">API Playground</a></h2></article><article><h2>Open inspector</h2><h2>⌘ + ⌥ + i</h2></article><article><h2>Fetch URL</h2><ul class="build"><li><a href="http://api.jquery.com/jQuery.get/">Read data</a><pre>$.get('{url}', console.log);</pre></li><li><a href="http://api.jquery.com/jQuery.post/">Create data</a><pre>$.put('{url}', console.log);</pre></li><li><a href="http://api.jquery.com/jQuery.ajax/">Delete / Update data</a><pre>$.ajax('{url}', { options });</pre></li></ul></article><article><h2>Save data</h2><ul class="build"><li><pre>var data;</pre></li><li><pre>$.get('{url}', res => data = res);</pre></li><li><pre>data</pre></li><li><pre>data.items</pre></li></ul></article><article><h2>Play around</h2><ul class="build"><li><pre>_.pluck(data.items, 'id')</pre></li><li><pre>_.groupBy(data.items, 'state')</pre></li><li><pre>_.sum(data.items, 'total_payment')</pre></li></ul></article><article><img class="bg" src="/all-the-things.8632d796.jpg"><h1>&nbsp;</h1><h1>Thats it</h1></article><article><h2>Whats next?</h2><ul class="build"><li>API Playground</li><li><a href="https://shyftplan.com/swagger">shyftplan.com/swagger</a></li><li>Slides</li><li><a href="http://lets-talk-about--api.taminomartinius.de/">lets-talk-about--api.taminomartinius.de</a></li></ul></article><article class="section"><h1>Questions?</h1></article></section><script src="/main.66973e2c.js"></script></body></html>